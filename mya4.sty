\usepackage{amssymb}
\usepackage{yhmath}
\usepackage{mathspec}
\setallmainfonts(Digits,Latin){Times New Roman}
\setmonofont{Courier New}
\usepackage{comment}
\usepackage[top=2cm, bottom=2cm, left=2.5cm, right=1cm]{geometry}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{xltxtra}
\usepackage{url}
\usepackage{appendix}
\usepackage[x11names, rgb]{xcolor}
\usepackage{tikz}
\usepackage{float}
\usepackage{fancyvrb}
\usepackage{tabularx}
\usepackage{caption}
\usepackage{varioref}
\usepackage{mathrsfs}
\usepackage{ifthen}
\usepackage{enumerate}
\usepackage{longtable}
\usepackage{pst-plot}
\usepackage{algorithmic}
\usepackage{minted}
\usepackage[final]{pdfpages}
\usepackage{csquotes}
\usepackage[lithuanian]{babel}
\selectlanguage{lithuanian}
\usepackage[labelnumber=true,natbib=true,bibstyle=ktu,firstinits=true,citestyle=ktu,language=lithuanian]{biblatex}
\bibliography{references}
\usemintedstyle{bw}
\renewcommand{\normalfont}{\sloppy\linespread{1.5}\fontsize{12pt}{12pt}\selectfont}
\newcommand{\lstsize}{10pt}
\newcommand{\lstfont}{\sloppy\linespread{1.5}\fontsize{\lstsize}{\lstsize}\selectfont\ttfamily}
\newcommand{\cmd}[1]{\sloppy\linespread{1.5}\fontsize{\lstsize}{\lstsize}\selectfont\framebox{\texttt{#1}}\normalfont}
\renewcommand{\bibname}{}
\newcommand{\mytocdots}{1.5mm}
\newcommand{\myheading}{\bfseries\fontsize{14pt}{14pt}\selectfont}
\usepackage[pdftitle={\mytitle},pdfsubject={\mysubject},pdfauthor={\myauthor},unicode=true,colorlinks=false,xetex,bookmarks=true,pdfborder=0,hyperindex=true]{hyperref}
\usepackage{sagetex}
\raggedbottom
\captionsetup[figure]{name=}
\captionsetup[table]{name=}
\DeclareCaptionFormat{ktulentele}{\bfseries #1 lentelė\par\raggedright#3\par}
\DeclareCaptionFont{ktu}{\bfseries}
\DeclareCaptionLabelSeparator{nothing}{}
\DeclareCaptionLabelFormat{ktu}{#2 #1}
\DeclareCaptionStyle{ktulentele}[]{justification=raggedleft,format=ktulentele,listformat=simple,labelseparator=period,labelformat=ktu,labelfont={ktu},textfont={ktu},singlelinecheck=false}
\DeclareCaptionFormat{ktupav}{\bfseries #1 pav. #3\par}
\DeclareCaptionStyle{ktupav}[]{justification=centering,format=ktupav,listformat=simple,labelseparator=period,labelformat=ktu,labelfont={ktu},textfont={ktu},singlelinecheck=false}
\makeatletter
\def\tagform@#1{\maketag@@@{\bfseries(\ignorespaces#1\unskip\@@italiccorr)}}
\makeatother
\renewcommand\thefigure{\arabic{chapter}.\arabic{figure}}
\renewcommand\thetable{\arabic{chapter}.\arabic{table}}
\renewcommand\theequation{\arabic{chapter}.\arabic{equation}}
\renewcommand\thechapter{\arabic{chapter}.}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{3}
\renewcommand\thesection{\thechapter\arabic{section}.}
\renewcommand\thesubsection{\thesection\arabic{subsection}.}
\renewcommand\thesubsubsection{\thesubsection\arabic{subsubsection}.}
\renewcommand\theparagraph{}
\usetikzlibrary{decorations,arrows,shapes}
\fancypagestyle{ktudarbas}{
\fancyhf{}
\fancyhead{}
\fancyfoot{}
\fancyhead[RO,RE]{\thepage}
\renewcommand{\headrulewidth}{0pt}
}
\makeatletter
\renewcommand{\@pnumwidth}{3em} \renewcommand{\@tocrmarg}{4em}
  \renewcommand{\chapter}{\@startsection{chapter}{1}{0mm}{\baselineskip}{\baselineskip}{\myheading\setcounter{figure}{0}\setcounter{table}{0}\raggedright}}
  \renewcommand{\section}{\@startsection{section}{2}{0mm}{\baselineskip}{\baselineskip}{\myheading\raggedright\raggedright}}
  \renewcommand{\subsection}{\@startsection{subsection}{3}{0mm}{\baselineskip}{\baselineskip}{\myheading\raggedright}}
  \renewcommand{\subsubsection}{\@startsection{subsubsection}{4}{0mm}{\baselineskip}{\baselineskip}{\myheading\raggedright}}
\makeatother
\DeclareMathOperator*{\cov}{cov}
\renewcommand{\theenumi}{\alph{enumi})}
\renewcommand{\labelenumi}{\theenumi}
\newcommand{\fname}{}
\newcommand{\forloop}[5][1]%
{%
\setcounter{#2}{#3}%
\ifthenelse{#4}%
  {%
  #5%
  \addtocounter{#2}{#1}%
  \forloop[#1]{#2}{\value{#2}}{#4}{#5}%
  }%
% Else
  {%
  }%
}%
\renewcommand{\reftextfaraway}{(žr. psl. \pageref}
\newminted{pascal}{linenos=true,baselinestretch=1,samepage=false,frame=leftline}
\newminted{text}{linenos=false,baselinestretch=1,samepage=false}
\renewcommand\theFancyVerbLine{\lstfont\arabic{FancyVerbLine}}
\renewcommand\FancyVerbFormatLine{\lstfont}
\newcommand{\mysrcref}[1]{\vref{file:#1}, #1)}
\newcommand{\mysrc}[2]{
  \mysubsection{#1}\label{file:#1}
  \inputminted[linenos=true,baselinestretch=1,samepage=false,frame=leftline]{#2}{#1}
}
\newcommand{\mysrcr}[3]{
  \mysubsection{#1}\label{file:#1}
  \inputminted[linenos=true,baselinestretch=1,samepage=false,frame=leftline]{#3}{#2}
}
\newcommand{\mytexfigurec}[2]{
  \begin{figure}[H]
    \begin{center}
      \input{#1}
      \captionsetup{style=ktupav}
      \caption{#2}
    \end{center}
  \end{figure}
}
\newcommand{\mytextablec}[2]{
  \begin{table}[H]
    \captionsetup{style=ktulentele}
    \caption{#2}
    \vspace{-20pt}
    \centering
    \input{#1}\label{tab:#1}
  \end{table}
  \addtocounter{table}{-1}
}
\newenvironment{mytable}[2]
  {
    \begin{table}[H]
      \captionsetup{style=ktulentele}
      \caption{#2}
      \centering
      \label{tab:#1}
  }
  {
    \end{table}
  }
\newcommand{\mytextc}[2]{
  \begin{figure}[H]
    \begin{center}
      \inputminted[linenos=true,baselinestretch=1,samepage=false,frame=leftline]{text}{#1}\label{file:#1}
      \captionsetup{style=ktupav}
      \caption{#2}
    \end{center}
  \end{figure}
}
\newcommand{\mytextn}[1]{
  \inputminted[linenos=true,baselinestretch=1,samepage=false,frame=leftline]{text}{#1}\label{file:#1}
}
\newcommand{\mytext}[1]{
  \begin{figure}[H]
    \begin{center}
      \inputminted[linenos=true,baselinestretch=1,samepage=false,frame=leftline]{text}{#1}\label{file:#1}
      \captionsetup{style=ktupav}
      \caption{#1}
    \end{center}
  \end{figure}
}
\newcommand{\myfigref}[1]{\ref{fig:#1}}
% filename, width, caption
\newcommand{\myfigure}[3]{
  \begin{figure}[H]
    \begin{center}
      \includegraphics[width=#2]{#1}\\
      \captionsetup{style=ktupav}
      \caption{#3}\label{fig:#1}
    \end{center}
  \end{figure}
}
\newcommand{\mynchapter}[1]{\clearpage\phantomsection\addcontentsline{toc}{chapter}{#1}\chapter*{\MakeUppercase{#1}}\label{sec:#1}}
\newcommand{\mychapter}[1]{\clearpage\chapter[#1]{\MakeUppercase{#1}}\label{sec:#1}}
\newcommand{\mysection}[1]{\section[#1]{\MakeUppercase{#1}}\label{sec:#1}}
\newcommand{\mysubsection}[1]{\subsection[#1]{#1}\label{sec:#1}}
\newcommand{\mysubsubsection}[1]{\subsubsection[#1]{#1}\label{sec:#1}}
\newcommand{\mycomment}[1]{}
\newcommand{\mq}[1]{,,#1\textquotedblleft}
\newenvironment{myappendices}
  {
    \mynchapter{Priedai}
    \begin{appendices}
      \renewcommand{\thesection}{\arabic{section} priedas.}
      \renewcommand{\thesubsection}{}
  }
  {
    \end{appendices}
  }
\newenvironment{mysol}
  {$\blacktriangleright$}
  {$\blacktriangleleft$}
\setlength{\tabcolsep}{1mm}
\setlength{\parindent}{1cm}
\usepackage{titletoc}
\usepackage{tocloft}

\setlength{\cftchapindent}{0em}
\setlength{\cftsecindent}{2em}
\setlength{\cftsubsecindent}{7em}
\setlength{\cftsubsubsecindent}{11em}
\setlength{\cftfigindent}{0em}
\setlength{\cfttabindent}{0em}

\setlength{\cftchapnumwidth}{2em}
\setlength{\cftsecnumwidth}{5em}
\setlength{\cftsubsecnumwidth}{4em}
\setlength{\cftsubsubsecnumwidth}{4em}
\setlength{\cftfignumwidth}{3em}
\setlength{\cfttabnumwidth}{3em}

\renewcommand{\cftchapfont}{\normalfont}
\renewcommand{\cftsecfont}{\normalfont}
\renewcommand{\cftsubsecfont}{\normalfont}
\renewcommand{\cftsubsubsecfont}{\normalfont}
\renewcommand{\cftfigfont}{\normalfont}
\renewcommand{\cfttabfont}{\normalfont}
\renewcommand{\cftchappagefont}{\normalfont}
\renewcommand{\cftsecpagefont}{\normalfont}
\renewcommand{\cftsubsecpagefont}{\normalfont}
\renewcommand{\cftsubsubsecpagefont}{\normalfont}
\renewcommand{\cftfigpagefont}{\normalfont}
\renewcommand{\cfttabpagefont}{\normalfont}
\renewcommand{\cftchapleader}{\normalfont\titlerule*[\mytocdots]{.}}
\renewcommand{\cftsecleader}{\normalfont\titlerule*[\mytocdots]{.}}
\renewcommand{\cftsubsecleader}{\normalfont\titlerule*[\mytocdots]{.}}
\renewcommand{\cftsubsubsecleader}{\normalfont\titlerule*[\mytocdots]{.}}
\renewcommand{\cftfigleader}{\normalfont\titlerule*[\mytocdots]{.}}
\renewcommand{\cfttableader}{\normalfont\titlerule*[\mytocdots]{.}}
\renewcommand{\cftbeforetoctitleskip}{-\baselineskip}
\renewcommand{\cftaftertoctitleskip}{\baselineskip}
\renewcommand{\cftbeforeloftitleskip}{-\baselineskip}
\renewcommand{\cftafterloftitleskip}{\baselineskip}
\renewcommand{\cftbeforelottitleskip}{-\baselineskip}
\renewcommand{\cftafterlottitleskip}{\baselineskip}
\newcommand{\myinit}{
\pagestyle{ktudarbas}
\tocloftpagestyle{ktudarbas}
\title{\mytitle}
\author{\myauthor}
\date{\today}
\renewcommand{\listfigurename}{\myheading\MakeUppercase{Paveikslų sąrašas}}
\renewcommand{\listtablename}{\myheading\MakeUppercase{Lentelių sąrašas}}
\renewcommand{\contentsname}{\myheading\MakeUppercase{Turinys}}
\renewcommand{\bibname}{\myheading\MakeUppercase{Literatūra}}
\renewcommand{\refname}{\myheading\MakeUppercase{Literatūra}}
\normalfont

\begin{titlepage}
  \begin{center}
    \includegraphics[width=0.7in]{ktu.jpeg} \\
    \textbf {
      \fontsize{18pt}{18pt}\selectfont {
        \MakeUppercase \myinstitution
      } \\
      \fontsize{16pt}{16pt}\selectfont {
        \MakeUppercase \myfaculty
      } \\
      \fontsize{14pt}{14pt}\selectfont {
        \MakeUppercase \mycathedral
      } \\[2.5cm]
      \fontsize{22pt}{22pt}\selectfont {
        \MakeUppercase \mytitle
      } \\[1cm]
    }
    \fontsize{16pt}{16pt}\selectfont {
      \mysubject
    }
    \\[3.5cm]
  \end{center}

  \textbf {
    \begin{flushright}
      \begin{tabular}{ r l }
         {Atliko:} & {\myauthor} \\
         {Priėmė:} & {\mymaster} \\
         {Data:} & {\mydate} \\
      \end{tabular}
    \end{flushright}
  }

  \vfill

  \begin{center}
    \textbf {
      \fontsize{16pt}{16pt}\selectfont {
        \MakeUppercase \mycity, \myyear
      }
    }
  \end{center}
\end{titlepage}

\clearpage\tableofcontents
\clearpage\listoffigures
\clearpage\listoftables
}
\newcommand{\myliterature}{
\clearpage
\phantomsection
\addcontentsline{toc}{chapter}{Literatūra}
\printbibliography
}
